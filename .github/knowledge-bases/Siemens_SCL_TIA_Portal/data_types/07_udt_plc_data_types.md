# 07 Udt Plc Data Types

# Basics of PLC data types (UDT)

| Basics of PLC data types (UDT) |
|---|
Description

A
PLC data type (UDT) is a complex, user-defined data type that is used
for the declaration of a tag. It represents a data structure made up of
several components of different data types. The components can also be
derived from another PLC data type, from an ARRAY or directly using the
STRUCT keyword as a structure. The nesting depth is hereby limited to 8
levels.

You can
change a PLC data type (UDT) centrally and use it repeatedly in the
program code. All locations of use are updated automatically.

Advantages of the PLC data types:

- Simple data exchange via block interfaces among several blocks

- Group data according to the process control

- Transferring a parameter as a data unit

Using a PLC data type

You
can declare PLC data types as a type when creating data blocks. Based
on this type, you can create a number of data blocks, all of which have
the same data structure. These data blocks can be adapted by entering
different actual values for the corresponding task.

For
instance, create a PLC data type for a recipe for blending paints. You
can then assign this data type to several data blocks, each of which
contains different quantity information.

The following figure shows this application:

PLC data types can be used for the following applications:

- PLC data types can be used as data types for tags in the tag declaration of logic blocks or in data blocks.

- PLC data types can be used as templates for the creation of global data blocks with identical data structures.

- PLC data types can be used in S7-1200 and S7-1500 as a template for the creation of structured PLC tags.

Nesting depth of PLC data types

PLC
data types (UDT) can be nested to a depth of 8 hierarchy levels. For
S7-1500 series CPUs starting with firmware V4.0, a nesting depth of 26
hierarchical levels is possible. An ARRAY of STRUCT/UDT requires 3
hierarchical levels each. When you use these data types, the maximum
nesting depth is reduced accordingly.

Call hierarchy

Disadvantages of anonymous structures

The
components of the structured tags can be identically addressed. This is
regardless of whether the declaration has been made using a PLC data
type or an anonymous structure.

The following disadvantages apply when using anonymous structures:

- Reusability of the same structure by copying. This makes it difficult to change the structure

- Anonymous structures are not compatible with PLC data types (UDT) of the same structure

- Performance, since the matching types for structural components are checked during runtime

- The high limit is more easily reached when using anonymous structures, since all components must be evaluated individually.

Example

The following example shows the data type definition of the "MyUDT" PLC data type:

PLC data types generated by the system

Some
instructions generate their own PLC data types during instancing which
are saved in the "PLC data types" project folder. Do not use these PLC
data types created by the system in a library, because this may result
in undesirable system behavior. If necessary, these PLC data types are
created by the system, which means they must not be stored in a library.

Generating external sources from blocks

When
generating external sources from blocks, the changes made directly in
the block interface to the default values of PLC data types are not
exported to the sources. This means that these values are not available
when the sources are imported once again. The default values are applied
instead. To prevent this loss of data for the modified default values,
the changes must be made directly in the PLC data type and not in the
block interface. In this case, the changes are also exported when
external sources are generated.

Additional information on the PLC data types (UDTs)

| Note Declaring PLC data types (UDTs): Structure of the declaration table for PLC data types Programming recommendations for PLC data types: Using PLC data types (UDT) Using the DB_ANY data type Comparison of PLC data types (UDTs) in the program: Comparing PLC data types |
|---|

| Note You can find more information on the PLC data types in the Siemens Industry Online Support in the following contributions: How can you initialize structures in optimized memory areas at the S7-1500 in STEP 7 (TIA Portal)? https://support.industry.siemens.com/cs/ww/de/view/78678760 How do you create a PLC data type (UDT) at an S7-1500 control system? https://support.industry.siemens.com/cs/ww/de/view/67599090 How is the specific application of own PLC data types (UDT) effected in STEP 7 (TIA Portal)? https://support.industry.siemens.com/cs/de/de/view/67582844 Why should complete structures be transferred at a block call for S7-1500 instead of many individual components? https://support.industry.siemens.com/cs/ww/de/view/67585079 |
|---|
See also

Addressing PLC data types (UDT) Declaring tags based on a PLC data type Declaring tags based on a PLC data type Comparing PLC tags Creating structured PLC tags Permissible addresses and data types of PLC tags CMP ==: Equal (S7-1200, S7-1500, S7-1200 G2) Transferring a tag of the PLC data type (UDT)


# Transferring a tag of the PLC data type (UDT)

| Transferring a tag of the PLC data type (UDT) |
|---|
Description

You
can also transfer tags that are declared as PLC data type (UDT) as
actual parameters. If the formal parameter is declared as a PLC data
type (UDT) in the tag declaration, you must transfer a tag that has the
same PLC data type (UDT) as an actual parameter.

An
element of a tag declared using the PLC data type (UDT) can also be
transferred as an actual parameter for the block call, provided the data
type of the element of the tag matches the data type of the formal
parameter.

Structures
and user-defined PLC data types can be assigned to one another if they
have identical structures. This means that the data types and the order
of all structure components must be identical. In nested structures, the
data types and the order of the lower-level structures and their
components must also match.

Two
different PLC data types can also be assigned to one another if the
data types and the order of all structure components including the
lower-level structures are identical. The names of the PLC data types do
not have to match.

User-defined PLC data types and structures cannot be assigned to system data types.

See also

Rules for supplying block parameters


# Addressing PLC data types (UDT)

| Addressing PLC data types (UDT) |
|---|
Addressing data elements of an PLC data type

PLC
data types are types that you can use as a template to create program
elements. For example, you can derive PLC tags or data blocks from PLC
data types. Direct access to a PLC data type is therefore not possible.
However, you can access the program elements that you have created based
on a PLC data type.

Use the following syntax for this:

<ProgramelementName>.<ElementName>

Examples

The following examples show the addressing of structured data type tags:

| Addressing | Explanation |
|---|---|
| #Values.Temperature | Addressing of the "Temperature" element in the "Values" tag, which is based on a PLC data type. |
| "Global_DB".Valves | Addressing of the "Valves" element in the global data block "Global_DB". Neither the accessing block nor the called block is located in a namespace. |
| MyNamespace.Global_DB.Valves | Addressing of the "Valves" element in the global data block "Global_DB". The "Global_DB" block is in the "MyNamespace" namespace. |

| Note Calling and addressing blocks in namespaces Blocks located in namespaces are represented in the program code in IEC-compliant notation: The block name is not in quotation marks. The namespace precedes the block name, separated by a dot. You can find detailed information on the notation of namespaces under: Categorizing program elements in namespaces |
|---|
See also

Addressing tags in global data blocks

Named value data types (S7-1500)
